<!DOCTYPE html>
<html>

<body>
    <app-top-bar></app-top-bar>
    
    <section class="overlape">
        <div class="block no-padding">
          <div data-velocity="-.1" class="parallax scrolly-invisible no-parallax"></div>
          <div class="container fluid">
            <div class="row">
              <div class="col-lg-12">
                  <div class="inner-header" id="responsive-title">
                      <h3>Chat</h3>
                    </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    
      <section>
        <div class="block no-padding">
          <div class="container">
             <div id="frame">
                <div id="sidepanel">
                  <!-- rooms -->
                  <div class="rooms">
                    <ul class="list-unstyled" style="list-style-type: none;" *ngFor="let room of room_data; let i = index">
                      <li class="room">
                        <a (click)="loadChat(room.chatID, room.name)">
                        <div class="wrap">
                          <span class="room-status away "></span>
                          <img :src="room.image" alt="" />
                          <div class="meta">
                            <p class="name sidebar">{{ room.name }}</p>
                            <!-- <p class="sidebar"><a>Delete</a></p> -->
                          </div>
                        </div>
                        </a>
                        
                      </li>
                    </ul>
                  </div>

                </div>

                <div id="content" class="content">
                  <!-- room-details -->
                  <div class="room-details">
                      <img :src="activeRoom.image" alt="" class='description' />
                      <p>{{ current_room_data.user }}</p>

                    </div>
                  <!-- messages -->
                  <div class='messages-wrapper'>
                      <!-- <virtual-scroll [items]="current_room_data.messages" (update)="current_room_data.messages = $event"> -->
                        <!-- {{ user }} -->
                        <div class="list" style="overflow-y:auto;" >
                        <div [contextMenu]="basicMenu" [contextMenuSubject]="message" [ngClass]="{ 'message': 1==1, 'sent': message.M.from.S == user, 'replies': message.M.from.S != user}" *ngFor="let message of current_room_data.messages; let i = index;">
                          <span class="sender">{{ message.M.from.S }}</span>
                          <p>{{ message.M.message.S }}</p>
                          <context-menu>
                              <ng-template contextMenuItem (execute)="deleteMessage(message.M.date.S)">
                                Delete Message
                              </ng-template>
                            </context-menu>
                        </div>
                      
                    </div>
                    <!-- <div ng:bind="message_html"></div> -->
                  </div>

                    <div class="message-input">
                        <div class="wrap">
                        <input type="text" id='textbox' [(ngModel)]="myVar" placeholder="Write your message..." />
                        <button class="submit" (click)="sendMessage(myVar)" ng-click="myVar = null"><i class="fa fa-paper-plane" aria-hidden="true"></i></button>
                        </div>
                      </div>
                </div>

              </div>
             </div>
          </div>
      </section>

    <app-bottom-bar></app-bottom-bar>
</body>
</html>



